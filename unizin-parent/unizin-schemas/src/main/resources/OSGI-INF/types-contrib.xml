<?xml version="1.0"?>
<component name="org.unizin.catalog.nuxeo.types">


  <require>org.nuxeo.ecm.core.schema.TypeService</require>
  <require>org.nuxeo.ecm.core.CoreExtensions</require>
  <require>org.nuxeo.ecm.directories</require>

  <extension target="org.nuxeo.ecm.core.schema.TypeService" point="schema">
    <schema name="HarvestedRecord" src="schemas/HarvestedRecord.xsd"
            prefix="hrv"/>
  </extension>

  <extension target="org.nuxeo.ecm.core.schema.TypeService" point="doctype">
    <facet name="Harvested">
      <schema name="HarvestedRecord"/>
    </facet>
    <doctype name="File" extends="Document">
      <schema name="common"/>
      <schema name="file"/>
      <schema name="dublincore"/>
      <schema name="uid"/>
      <schema name="files"/>
      <facet name="Downloadable"/>
      <facet name="Versionable"/>
      <facet name="Publishable"/>
      <facet name="Commentable"/>
      <facet name="HasRelatedText"/>
      <facet name="Harvested"/>
    </doctype>
  </extension>

  <extension target="org.nuxeo.ecm.directory.sql.SQLDirectoryFactory"
      point="directories">
      <directory name="sourceRepositories">
          <schema>vocabulary</schema>
          <dataSource>java:/nxsqldirectory</dataSource>
          <cacheTimeout>3600</cacheTimeout>
          <cacheMaxSize>1000</cacheMaxSize>
          <idField>id</idField>
          <autoincrementIdField>false</autoincrementIdField>
          <createTablePolicy>on_missing_columns</createTablePolicy>
          <table>sourceRepositories</table>
          <dataFile>vocabularies/source-repositories.csv</dataFile>
      </directory>
  </extension>

</component>
